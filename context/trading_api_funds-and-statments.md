# Dhan API Documentation

## 1. Funds API Documentation

Users can get details about the fund requirements or available funds (with margin requirements) in their Trading Account.

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | /margincalculator | Margin requirement for any order |
| GET | /fundlimit | Retrieve trading account fund information |

---

### Margin Calculator

Fetch span, exposure, var, brokerage, leverage, available margin values for any type of order and instrument that you want to place.

**Endpoint:** `POST https://api.dhan.co/v2/margincalculator`

**cURL Example:**
```bash
curl --request POST \
--url https://api.dhan.co/v2/margincalculator \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'access-token: ' \
--data '{Request JSON}'
```

**Request Structure:**
```json
{
    "dhanClientId": "1000000132",
    "exchangeSegment": "NSE_EQ",
    "transactionType": "BUY",
    "quantity": 5,
    "productType": "CNC",
    "securityId": "1333",
    "price": 1428,
    "triggerPrice": 1427
}
```

**Request Parameters:**

| Field | Type | Description |
|-------|------|-------------|
| dhanClientId<br>_required_ | string | User specific identification generated by Dhan |
| exchangeSegment<br>_required_ | enum string | Exchange & Segment<br>`NSE_EQ` `NSE_FNO` `BSE_EQ` `BSE_FNO` `MCX_COMM` |
| transactionType<br>_required_ | enum string | The trading side of transaction<br>`BUY` `SELL` |
| quantity<br>_required_ | int | Number of shares for the order |
| productType<br>_required_ | enum string | Product type<br>`CNC` `INTRADAY` `MARGIN` `MTF` `CO` `BO` |
| securityId<br>_required_ | string | Exchange standard id for each scrip. Refer [here](https://dhanhq.co/docs/v2/instruments/) |
| price<br>_required_ | float | Price at which order is placed |
| triggerPrice<br>_conditionally required_ | float | Price at which the order is triggered, in case of SL-M & SL-L |

**Response Structure:**
```json
{
    "totalMargin": 2800.00,
    "spanMargin": 1200.00,
    "exposureMargin": 1003.00,
    "availableBalance": 10500.00,
    "variableMargin": 1000.00,
    "insufficientBalance": 0.00,
    "brokerage": 20.00,
    "leverage": "4.00"
}
```

**Response Parameters:**

| Field | Type | Description |
|-------|------|-------------|
| totalMargin | float | Total Margin required for placing the order successfully |
| spanMargin | float | SPAN margin required |
| exposureMargin | float | Exposure margin required |
| availableBalance | float | Available amount in trading account |
| variableMargin | float | VAR or Variable margin required |
| insufficientBalance | float | Insufficient amount in trading account (Available Balance - Total Margin) |
| brokerage | float | Brokerage charges for executing order |
| leverage | string | Margin leverage provided for the order as per product type |

---

### Fund Limit

Get all information of your trading account like balance, margin utilised, collateral, etc.

**Endpoint:** `GET https://api.dhan.co/v2/fundlimit`

**cURL Example:**
```bash
curl --request GET \
--url https://api.dhan.co/v2/fundlimit \
--header 'Content-Type: application/json' \
--header 'access-token: JWT'
```

**Request Structure:**
_No Body_

**Response Structure:**
```json
{
    "dhanClientId": "1000000009",
    "availabelBalance": 98440.0,
    "sodLimit": 113642,
    "collateralAmount": 0.0,
    "receiveableAmount": 0.0,
    "utilizedAmount": 15202.0,
    "blockedPayoutAmount": 0.0,
    "withdrawableBalance": 98310.0
}
```

**Response Parameters:**

| Field | Type | Description |
|-------|------|-------------|
| dhanClientId | string | User specific identification generated by Dhan |
| availabelBalance | float | Available amount to trade |
| sodLimit | float | Start of the day balance in account |
| collateralAmount | float | Amount received against collateral |
| receiveableAmount | float | Amount available against selling deliveries |
| utilizedAmount | float | Amount utilised in the day |
| blockedPayoutAmount | float | Amount blocked against payout request |
| withdrawableBalance | float | Amount available to withdraw in bank account |

**Note:** For description of enum values, refer [Annexure](https://dhanhq.co/docs/v2/annexure)

---

## 2. Statements API Documentation

This set of APIs retrieves all your trade and ledger details to help you summarise and analyse your trades.

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | /ledger | Retrieve Trading Account debit and credit details |
| GET | /trades/ | Retrieve historical trade data |

---

### Ledger Report

Users can retrieve Trading Account Ledger Report with all Credit and Debit transaction details for a particular time interval. For this, you need to pass start date and end date as query parameters to define time interval of Ledger Report.

**Endpoint:** `GET https://api.dhan.co/v2/ledger`

**cURL Example:**
```bash
curl --request GET \
--url 'https://api.dhan.co/v2/ledger?from-date={YYYY-MM-DD}&to-date={YYYY-MM-DD}' \
--header 'Accept: application/json' \
--header 'access-token: {JWT}'
```

**Query Parameters:**

| Field | Description |
|-------|-------------|
| from-date<br>_required_ | Date from which Ledger Report is required in format `YYYY-MM-DD` |
| to-date<br>_required_ | Date upto which Ledger Report is required in format `YYYY-MM-DD` |

**Request Structure:**
_No Body_

**Response Structure:**
```json
{
    "dhanClientId": "1000000001",
    "narration": "FUNDS WITHDRAWAL",
    "voucherdate": "Jun 22, 2022",
    "exchange": "NSE-CAPITAL",
    "voucherdesc": "PAYBNK",
    "vouchernumber": "202200036701",
    "debit": "20000.00",
    "credit": "0.00",
    "runbal": "957.29"
}
```

**Response Parameters:**

| Field | Type | Description |
|-------|------|-------------|
| dhanClientId | string | User specific identification generated by Dhan |
| narration | string | Description of the ledger transaction |
| voucherdate | string | Transaction Date |
| exchange | string | Exchange information for the transaction |
| voucherdesc | string | Nature of transaction |
| vouchernumber | string | System generated transaction number |
| debit | string | Debit amount (only when credit returns 0) |
| credit | string | Credit amount (only when debit returns 0) |
| runbal | string | Running Balance post transaction |

---

### Trade History

Users can retrieve their detailed trade history for all orders for a particular time frame. User needs to add header parameters along with page number as the response is paginated.

**Endpoint:** `GET https://api.dhan.co/v2/trades/{from-date}/{to-date}/{page}`

**cURL Example:**
```bash
curl --request GET \
--url https://api.dhan.co/v2/trades/{from-date}/{to-date}/{page} \
--header 'Accept: application/json' \
--header 'access-token: {JWT}'
```

**Path Parameters:**

| Field | Description |
|-------|-------------|
| from-date<br>_required_ | Date from which Trade History is required in format `YYYY-MM-DD` |
| to-date<br>_required_ | Date upto which Trade History is required in format `YYYY-MM-DD` |
| page<br>_required_ | Page number of which data is being fetched. Pass `0` as default. |

**Request Structure:**
_No Body_

**Response Structure:**
```json
[
    {
        "dhanClientId": "1000000001",
        "orderId": "212212307731",
        "exchangeOrderId": "76036896",
        "exchangeTradeId": "407958",
        "transactionType": "BUY",
        "exchangeSegment": "NSE_EQ",
        "productType": "CNC",
        "orderType": "MARKET",
        "tradingSymbol": null,
        "customSymbol": "Tata Motors",
        "securityId": "3456",
        "tradedQuantity": 1,
        "tradedPrice": 390.9,
        "isin": "INE155A01022",
        "instrument": "EQUITY",
        "sebiTax": 0.0004,
        "stt": 0,
        "brokerageCharges": 0,
        "serviceTax": 0.0025,
        "exchangeTransactionCharges": 0.0135,
        "stampDuty": 0,
        "createTime": "NA",
        "updateTime": "NA",
        "exchangeTime": "2022-12-30 10:00:46",
        "drvExpiryDate": "NA",
        "drvOptionType": "NA",
        "drvStrikePrice": 0
    } 
]
```

**Response Parameters:**

| Field | Type | Description |
|-------|------|-------------|
| dhanClientId | string | User specific identification generated by Dhan |
| orderId | string | Order specific identification generated by Dhan |
| exchangeOrderId | string | Order specific identification generated by exchange |
| exchangeTradeId | string | Trade specific identification generated by exchange |
| transactionType | enum string | The trading side of transaction<br>`BUY` `SELL` |
| exchangeSegment | enum string | Exchange Segment of instrument to be subscribed as found in [Annexure](https://dhanhq.co/docs/v2/annexure/#exchange-segment) |
| productType | enum string | Product type of trade<br>`CNC` `INTRADAY` `MARGIN` `MTF` `CO` `BO` |
| orderType | enum string | Order Type<br>`LIMIT` `MARKET` `STOP_LOSS` `STOP_LOSS_MARKET` |
| tradingSymbol | string | Symbol in which order was placed - Refer [here](https://dhanhq.co/docs/v2/instruments/) |
| customSymbol | string | Trading Symbol as per Dhan |
| securityId | string | Exchange standard ID for each scrip. Refer [here](https://dhanhq.co/docs/v2/instruments/) |
| tradedQuantity | int | Number of shares executed |
| tradedPrice | float | Price at which trade is executed |
| isin | string | Universal standard ID for each scrip |
| instrument | string | Type of Instrument<br>`EQUITY` `DERIVATIVES` |
| sebiTax | string | SEBI Turnover Charges |
| stt | string | Securities Transactions Tax |
| brokerageCharges | string | Brokerage charges by Dhan, refer pricing [here](https://dhan.co/pricing/) |
| serviceTax | string | Applicable Service Tax |
| exchangeTransactionCharges | string | Exchange Transaction Charge |
| stampDuty | string | Stamp Duty Charges |
| createTime | string | Time at which the order is created |
| updateTime | string | Time at which the last activity happened |
| exchangeTime | string | Time at which order reached at exchange |
| drvExpiryDate | int | For F&O, expiry date of contract |
| drvOptionType | enum string | Type of Option<br>`CALL` `PUT` |
| drvStrikePrice | float | For Options, Strike Price |

**Note:** For description of enum values, refer [Annexure](https://dhanhq.co/docs/v2/annexure)

---

I've successfully retrieved and formatted both documentation pages in markdown format. The documentation covers:

1. **Funds APIs** - Including Margin Calculator and Fund Limit endpoints
2. **Statements APIs** - Including Ledger Report and Trade History endpoints

Each section includes detailed information about endpoints, request/response structures, parameters, and examples.